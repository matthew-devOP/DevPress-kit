[xdebug]
; Xdebug Configuration for Remote Debugging
; Environment-based toggle: Set XDEBUG_ENABLED=1 to enable debugging

; Xdebug mode configuration (environment controlled)
; This will be set dynamically based on XDEBUG_ENABLED environment variable
; Default mode when debugging is enabled: debug,develop
; When XDEBUG_ENABLED is not set or 0: off
xdebug.mode = ${XDEBUG_MODE:-off}

; Remote debugging configuration
xdebug.client_host = ${XDEBUG_CLIENT_HOST:-host.docker.internal}
xdebug.client_port = ${XDEBUG_CLIENT_PORT:-9003}
xdebug.start_with_request = ${XDEBUG_START_WITH_REQUEST:-yes}

; IDE Key for debugging sessions
xdebug.idekey = ${XDEBUG_IDEKEY:-VSCODE}

; Connection settings
xdebug.connect_timeout_ms = 2000
xdebug.log_level = 0

; File link protocol for IDE integration
; Uncomment and adjust for your IDE
; xdebug.file_link_format = "vscode://file/%f:%l"

; Coverage and profiling (only when explicitly enabled)
xdebug.output_dir = /tmp/xdebug

; Development helpers (when in develop mode)
xdebug.var_display_max_children = 256
xdebug.var_display_max_data = 1024
xdebug.var_display_max_depth = 5

; Debugging control
xdebug.show_error_trace = 1
xdebug.show_exception_trace = 1
xdebug.scream = 0

; Function trace settings (use sparingly)
; xdebug.trace_output_dir = /tmp/xdebug
; xdebug.trace_format = 1

; Performance settings
xdebug.max_nesting_level = 256

; Step debugging control
xdebug.start_upon_error = default
